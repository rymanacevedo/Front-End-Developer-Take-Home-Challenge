<rux-container>
  <header slot="header">GRM Alert Dashboard</header>

  <div class="dashboard-content">
    @if (error$ | async; as error) {
      <rux-notification status="critical" [message]="error" open="true">
        <rux-button slot="actions" (click)="retry()">Retry</rux-button>
      </rux-notification>
    } @else if (loading$ | async) {
      <div class="loading-indicator">
        <rux-progress [value]="progress$ | async"></rux-progress>
      </div>
    } @else {
      <div class="filter-controls">
        <rux-segmented-button
          [data]="severityFilters"
          (ruxchange)="onSeverityFilterChanged($any($event))"
        ></rux-segmented-button>
      </div>

      <app-alert-list
        [alerts]="filteredAlerts()"
        (showDetails)="onShowDetails($event)"
        (acknowledge)="onAcknowledge($event)"
      ></app-alert-list>
    }
  </div>
</rux-container>

<rux-dialog #detailsDialog [open]="dialogOpen" (rux-dialog-closed)="onDialogClosed()">
  <header slot="header">
    Alert Details
  </header>
  <main>
    @if (selectedAlert) {
      <p><strong>Satellite:</strong> {{ selectedAlert.contactSatellite }}</p>
      <p><strong>Detail:</strong> {{ selectedAlert.contactDetail }}</p>
    }
  </main>
  <footer slot="footer">
    <rux-button (click)="onDialogClosed()">Close</rux-button>
  </footer>
</rux-dialog>
